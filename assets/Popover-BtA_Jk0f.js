import{b as bo,g as wo,s as so,u as Eo,_ as M,a as m,f as Q,h as To}from"./DefaultPropsProvider-ELLn0s9H.js";import{r as a}from"./index-Cp_2WB0_.js";import{j as k}from"./jsx-runtime-BjgbQsUx.js";import{M as Ro,o as Z}from"./Modal-Cmz8wYNv.js";import{P as So}from"./Paper-DS3CdBkb.js";import{a as Oo}from"./ButtonBase-B3vSuhhO.js";import{o as oo,u as to,i as Co}from"./Portal-D7fkpCCq.js";import{G as zo}from"./Grow-HZtlPjEj.js";function _o(t,o=166){let r;function P(...y){const b=()=>{t.apply(this,y)};clearTimeout(r),r=setTimeout(b,o)}return P.clear=()=>{clearTimeout(r)},P}function Mo(t){return wo("MuiPopover",t)}bo("MuiPopover",["root","paper"]);const ko=["onEntering"],Lo=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],Wo=["slotProps"];function eo(t,o){let r=0;return typeof o=="number"?r=o:o==="center"?r=t.height/2:o==="bottom"&&(r=t.height),r}function ro(t,o){let r=0;return typeof o=="number"?r=o:o==="center"?r=t.width/2:o==="right"&&(r=t.width),r}function no(t){return[t.horizontal,t.vertical].map(o=>typeof o=="number"?`${o}px`:o).join(" ")}function L(t){return typeof t=="function"?t():t}const jo=t=>{const{classes:o}=t;return To({root:["root"],paper:["paper"]},Mo,o)},Do=so(Ro,{name:"MuiPopover",slot:"Root",overridesResolver:(t,o)=>o.root})({}),Ho=so(So,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,o)=>o.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Vo=a.forwardRef(function(o,r){var P,y,b;const w=Eo({props:o,name:"MuiPopover"}),{action:io,anchorEl:c,anchorOrigin:v={vertical:"top",horizontal:"left"},anchorPosition:W,anchorReference:g="anchorEl",children:lo,className:ao,container:co,elevation:j=8,marginThreshold:i=16,open:f,PaperProps:po={},slots:E,slotProps:T,transformOrigin:x={vertical:"top",horizontal:"left"},TransitionComponent:R=zo,transitionDuration:S="auto",TransitionProps:{onEntering:D}={},disableScrollLock:O=!1}=w,H=M(w.TransitionProps,ko),fo=M(w,Lo),u=(P=T==null?void 0:T.paper)!=null?P:po,C=a.useRef(),uo=Oo(C,u.ref),z=m({},w,{anchorOrigin:v,anchorReference:g,elevation:j,marginThreshold:i,externalPaperSlotProps:u,transformOrigin:x,TransitionComponent:R,transitionDuration:S,TransitionProps:H}),$=jo(z),N=a.useCallback(()=>{if(g==="anchorPosition")return W;const e=L(c),s=(e&&e.nodeType===1?e:oo(C.current).body).getBoundingClientRect();return{top:s.top+eo(s,v.vertical),left:s.left+ro(s,v.horizontal)}},[c,v.horizontal,v.vertical,W,g]),A=a.useCallback(e=>({vertical:eo(e,x.vertical),horizontal:ro(e,x.horizontal)}),[x.horizontal,x.vertical]),U=a.useCallback(e=>{const n={width:e.offsetWidth,height:e.offsetHeight},s=A(n);if(g==="none")return{top:null,left:null,transformOrigin:no(s)};const V=N();let d=V.top-s.vertical,h=V.left-s.horizontal;const X=d+n.height,Y=h+n.width,q=Z(L(c)),J=q.innerHeight-i,K=q.innerWidth-i;if(i!==null&&d<i){const l=d-i;d-=l,s.vertical+=l}else if(i!==null&&X>J){const l=X-J;d-=l,s.vertical+=l}if(i!==null&&h<i){const l=h-i;h-=l,s.horizontal+=l}else if(Y>K){const l=Y-K;h-=l,s.horizontal+=l}return{top:`${Math.round(d)}px`,left:`${Math.round(h)}px`,transformOrigin:no(s)}},[c,g,N,A,i]),[ho,F]=a.useState(f),p=a.useCallback(()=>{const e=C.current;if(!e)return;const n=U(e);n.top!==null&&(e.style.top=n.top),n.left!==null&&(e.style.left=n.left),e.style.transformOrigin=n.transformOrigin,F(!0)},[U]);a.useEffect(()=>(O&&window.addEventListener("scroll",p),()=>window.removeEventListener("scroll",p)),[c,O,p]);const mo=(e,n)=>{D&&D(e,n),p()},Po=()=>{F(!1)};a.useEffect(()=>{f&&p()}),a.useImperativeHandle(io,()=>f?{updatePosition:()=>{p()}}:null,[f,p]),a.useEffect(()=>{if(!f)return;const e=_o(()=>{p()}),n=Z(c);return n.addEventListener("resize",e),()=>{e.clear(),n.removeEventListener("resize",e)}},[c,f,p]);let G=S;S==="auto"&&!R.muiSupportAuto&&(G=void 0);const vo=co||(c?oo(L(c)).body:void 0),_=(y=E==null?void 0:E.root)!=null?y:Do,I=(b=E==null?void 0:E.paper)!=null?b:Ho,go=to({elementType:I,externalSlotProps:m({},u,{style:ho?u.style:m({},u.style,{opacity:0})}),additionalProps:{elevation:j,ref:uo},ownerState:z,className:Q($.paper,u==null?void 0:u.className)}),B=to({elementType:_,externalSlotProps:(T==null?void 0:T.root)||{},externalForwardedProps:fo,additionalProps:{ref:r,slotProps:{backdrop:{invisible:!0}},container:vo,open:f},ownerState:z,className:Q($.root,ao)}),{slotProps:xo}=B,yo=M(B,Wo);return k.jsx(_,m({},yo,!Co(_)&&{slotProps:xo,disableScrollLock:O},{children:k.jsx(R,m({appear:!0,in:f,onEntering:mo,onExited:Po,timeout:G},H,{children:k.jsx(I,m({},go,{children:lo}))}))}))});export{Vo as P,Ho as a,_o as d};
